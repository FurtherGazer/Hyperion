<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Hyperion</title><style>#scatter-gl-container,.canvas-wrapper{display:inline-block;vertical-align:top}#scatter-gl-container{border:1px solid #000;position:relative}#video{-webkit-transform:scaleX(-1);transform:scaleX(-1);visibility:hidden;width:auto;height:auto}#hide,#video{display:none}</style></head><body> <div id="main"> <div class="container"> <div class="canvas-wrapper"> <canvas id="output" width="600" height="400"></canvas> <canvas id="hide" width="300" height="300"></canvas> <video id="video" playsinline=""> </video></div> </div> </div> <div> <button onclick="main()">开启</button> <button id="closeBT" onclick="stopMain()" disabled>停止</button> </div> <script>function e(e,t,n,a,i,o,r){try{var c=e[o](r),d=c.value}catch(u){return void n(u)}c.done?t(d):Promise.resolve(d).then(a,i)}function t(t){return function(){var n=this,a=arguments;return new Promise(function(i,o){var r=t.apply(n,a);function c(t){e(r,i,o,c,d,"next",t)}function d(t){e(r,i,o,c,d,"throw",t)}c(void 0)})}}var n=468,a=5,i="#32EEDB",o="#FF2C35",r="#157AB3",c="600",d="400";window.rafID=null,window.animation_status=!1,canvas=document.getElementById("output"),canvas_hide=document.getElementById("hide"),canvas.width="600",canvas.height="400";var u=document.querySelector(".canvas-wrapper");function s(){return l.apply(this,arguments)}function l(){return(l=t(regeneratorRuntime.mark(function e(){var t,n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={video:{width:600,height:400,facingMode:"user"},audio:!1},n=document.getElementById("video"),(a=document.getElementById("closeBT"))&&(a.disabled=!1),e.next=6,navigator.mediaDevices.getUserMedia(t);case 6:return i=e.sent,n.srcObject=i,n.play(),console.log("Set MediaStream!"),window.CurMediaStream=i,e.abrupt("return",new Promise(function(e){n.onloadedmetadata=function(){e(n)}}));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function m(e){e.getTracks().forEach(function(e){"live"==e.readyState&&"video"===e.kind&&e.stop()})}function w(){window.CurMediaStream?m(window.CurMediaStream):console.log("没有正在运行的 MediaStream"),window.animation_status=!1,window.cancelAnimationFrame(window.rafID)}u.style="width: 600px; height: 400x",ctx=canvas.getContext("2d"),ctx.translate(canvas.width,0),ctx.scale(-1,1),ctx.fillStyle=i,ctx.strokeStyle=i,ctx.lineWidth=2,ctx2=canvas_hide.getContext("2d"),ctx.globalCompositeOperation="difference";</script> <script src="/Hyperion.80184ce2.js"></script> </body></html>